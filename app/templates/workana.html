<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Workana Hunt</title>
        <script src="https://unpkg.com/htmx.org@1.9.10"></script>
        <script src="https://cdn.tailwindcss.com"></script> <style>
            body { background-color: #0f172a; color: #e2e8f0; font-family: sans-serif; }
            .hunt-title { font-size: 2rem; font-weight: 800; text-align: center; margin: 2rem 0; color: #38bdf8; }

            .saved-list::-webkit-scrollbar { width: 6px; }
            .saved-list::-webkit-scrollbar-thumb { background: #334155; border-radius: 3px; }
        </style>
    </head>
    <body class="h-screen flex flex-col overflow-hidden">
        <h1 class="hunt-title">ðŸ”¥ Workana Hunt</h1>

        <div class="flex flex-1 overflow-hidden">
            <div class="flex-1 flex items-center justify-center bg-slate-900 p-4 relative">
                <div id="card-stage" class="w-full max-w-md">
                    <!-- Fix else not working when done (Reactivity?) -->
                    {% if current_project %}
                        {% with project = current_project %}
                            {% include 'partials/workana_card.html' %}
                        {% endwith %}
                    {% else %}
                        <div class="flex flex-col items-center justify-center h-full space-y-6">
                            
                            <div class="text-center">
                                <div class="text-6xl mb-4">ðŸ“­</div>
                                <h3 class="text-xl text-slate-400 font-semibold">Sem vagas novas na fila</h3>
                                <p class="text-slate-500 text-sm mt-2">Sua fila estÃ¡ vazia. Busque mais no Workana.</p>
                            </div>

                            <button 
                                hx-post="/workana/refresh?force=true" 
                                hx-target="#card-stage"
                                hx-indicator="#wk-loading"
                                class="flex items-center gap-2 px-6 py-3 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg font-bold transition-all shadow-lg hover:shadow-emerald-500/20 active:scale-95"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                                    <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.46 4.46a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
                                </svg>
                                Buscar Novas Vagas
                            </button>

                            <div id="wk-loading" class="htmx-indicator flex flex-col items-center">
                                <div class="spinner border-l-emerald-500"></div> <span class="text-xs text-slate-400 mt-2 animate-pulse">Conectando ao Workana...</span>
                            </div>

                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="w-80 bg-slate-800 border-l border-slate-700 flex flex-col fixed top-0 left-0 h-screen">
                <div class="p-4 border-b border-slate-700 font-bold text-emerald-400">
                    ðŸ’¾ Saved For Later
                </div>
                <div id="saved-list" class="saved-list flex-1 overflow-y-auto p-4 space-y-3">
                    {% for project in saved_projects %}
                        {% include 'partials/workana_saved_item.html' %}
                    {% endfor %}
                </div>
            </div>

        </div>

    </body>
</html>